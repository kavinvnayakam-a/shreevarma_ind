# apphosting.yaml
# Complete and Corrected for Shreevarma Next.js App

runConfig:
  cpu: 1
  memoryMiB: 512
  maxInstances: 1
  
  env:
    # --- Public URLs & Environments ---
    - variable: NEXT_PUBLIC_APP_URL
      value: https://app.shreevarma.org
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_CASHFREE_ENV
      value: production
      availability: [BUILD, RUNTIME]

    # --- Firebase/Google Internal ---
    - variable: GCLOUD_PROJECT
      value: __FIREBASE_PROJECT_ID__
      availability: [BUILD, RUNTIME]
    
    # --- Firebase Public Config (CRITICAL FOR CLIENT-SIDE LOAD) ---
    - variable: NEXT_PUBLIC_FIREBASE_API_KEY
      secret: NEXT_PUBLIC_FIREBASE_API_KEY
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      secret: NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      secret: NEXT_PUBLIC_FIREBASE_PROJECT_ID
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      secret: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      secret: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_FIREBASE_APP_ID
      secret: NEXT_PUBLIC_FIREBASE_APP_ID
      availability: [BUILD, RUNTIME]

    # --- Cashfree Secrets ---
    - variable: NEXT_PUBLIC_CASHFREE_APP_ID
      secret: CASHFREE_APP_ID
      availability: [BUILD, RUNTIME]
    - variable: CASHFREE_APP_ID             
      secret: CASHFREE_APP_ID
      availability: [RUNTIME]
    - variable: CASHFREE_SECRET_KEY
      secret: CASHFREE_SECRET_KEY
      availability: [RUNTIME]

    # --- ZEGOCLOUD & Gemini ---
    - variable: ZEGO_APP_ID
      secret: ZEGO_APP_ID
      availability: [BUILD, RUNTIME]
    - variable: NEXT_PUBLIC_ZEGO_APP_ID
      secret: ZEGO_APP_ID
      availability: [BUILD, RUNTIME]
    - variable: ZEGO_SERVER_SECRET
      secret: ZEGO_SERVER_SECRET
      availability: [RUNTIME]
    - variable: GEMINI_API_KEY
      secret: GEMINI_API_KEY
      availability: [RUNTIME]